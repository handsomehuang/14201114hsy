<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>惠Go-个人中心</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content="Modern Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design"/>
    <!-- Bootstrap Core CSS -->
    <link href="/css/bootstrap/bootstrap1.min.css" rel='stylesheet' type='text/css'/>
    <link href="/css/bootstrap/bootstrap-select.min.css" rel='stylesheet' type='text/css'/>

    <!-- Custom CSS -->
    <link href="/css/bootstrap/mystyle.css" rel='stylesheet' type='text/css'/>
    <link href="/css/bootstrap/style3.css" rel='stylesheet' type='text/css'/>
    <link href="/css/bootstrap/font-awesome.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="/js/jquery.min.js"></script>
    <!----webfonts--->
    <!---//webfonts--->
    <!-- Bootstrap Core JavaScript -->
    <script src="/js/myfunction.js" charset="utf-8"></script>
    <script src="/js/bootstrap/bootstrap1.min.js"></script>
    <script src="/js/bootstrap-select.min.js"></script>
</head>
<body style="background-color: white">
<div id="app">
    <div id="wrapper">
        <div class="navbar navbar-default" role="navigation" style="padding-left:20px;margin-bottom:0px">
            <div>
                <label class="navbar-text navbar-left" id="Hello">{{user.nickName}}</label>
                <button class="btn btn-link btn-lg navbar-left">消息（）</button>
                <button class="btn btn-link btn-lg navbar-right" style="margin-right:100px">联系客服</button>
                <button class="btn btn-link btn-lg navbar-right">卖家中心</button>
                <button class="btn btn-link btn-lg navbar-right">商品分类</button>
                <button class="btn btn-link btn-lg navbar-right">收藏夹</button>
                <button class="btn btn-link btn-lg navbar-right">个人中心</button>
                <button class="btn btn-link btn-lg navbar-right">我的惠Go</button>
                <button class="btn btn-link btn-lg navbar-right" onclick="window.location.href='/index'">惠Go网首页</button>
            </div>
        </div>

        <div class="panel panel-heading row flexbox">
            <h1 class="col-md-2  text-left">我的惠Go</h1>
            <a href="/person" class="btn btn-link btn-lg col-md-1">首页</a>
            <a href="##" class="btn btn-link btn-lg col-md-1">账户设置</a>
            <a href="##" class="btn btn-link btn-lg col-md-1">消息</a>
            <div class="col-md-3 col-md-offset-3">
                <form action="##" class="navbar-form " rol="search">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="请输入关键词"/>
                    </div>
                    <button type="submit" class="btn btn-default">搜索</button>
                </form>
            </div>
        </div>
        <!--下拉菜单-->
        <div class="navbar-default sidebar" role="navigation" style="background-color: whitesmoke;margin-top: 0px">
            <div class="sidebar-nav navbar-collapse">
                <ul class="nav" id="side-menu">

                    <li>
                        <a href="#"><i class="fa fa-dashboard fa-fw nav_icon"></i>商家<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="/user/businessOrderManage"></i>订单管理</a>
                            </li>
                            <li>
                                <a href="/user/businessInfoManage"></i>商家信息</a>
                            </li>
                            <li>
                                <a href="/user/businessGoodsInfo"></i>商品管理</a>
                            </li>

                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /.sidebar-collapse -->
        </div>

        <!-- /.navbar-static-side -->
        <!-- 右边信息 -->

        <!--<div class="col-md-3 col-md-offset-3" style="border: solid 1px red">-->
        <!--<form action="##" class="navbar-form " rol="search">-->
        <!--<div class="form-group">-->
        <!--<input type="text" class="form-control" placeholder="请输入关键词"/>-->
        <!--</div>-->
        <!--<button type="submit" class="btn btn-default">搜索</button>-->
        <!--</form>-->
        <!--</div>-->
        <div id="page-wrapper">
            <div class="col-md-12 graphs">
                <div class="xs">
                    <h2>团购活动</h2>
                    <div class="panel-body1">
                        <!-- 模态按钮 -->
                        操作：
                        <!-- <button class="btn btn-primary" id="btnUpGroupInfo">编辑</button>-->
                        <button class="btn btn-primary" id="btnAddGroupInfo" data-toggle="modal"
                                data-target="#addGroup" @click="showAddGroup">增加
                        </button>
                        <button class="btn btn-primary" id="btnDelGroupInfo">删除</button>

                        <!-- 编辑团购信息模态框 -->
                        <!--<div class="modal fade" id="upGroupInfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">-->
                        <!--<div class="modal-dialog">-->
                        <!--<div class="modal-content">-->
                        <!--<div class="modal-header">-->
                        <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->
                        <!--<h4 class="modal-title" id="myModalLabel">团购活动信息</h4>-->
                        <!--</div>-->
                        <!--<div class="modal-body">-->
                        <!--<form class="form-signin"  enctype="multipart/form-data" action="/group/upGroupPurchase"  method="post">-->
                        <!--<input type="text" id="updateGroup" name="updateGroup" hidden="hidden" />-->
                        <!--<table class="table table-hover">-->
                        <!--<tbody>-->
                        <!--<tr>-->
                        <!--<td height="100px"><img id="updateGroupImg" src="images/1.png"  class="img-rounded"  height="100px" width="100px"></img></td>-->
                        <!--<td  style="height:100px;vertical-align:middle"><input type="file" name="updateGroupImg"></td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                        <!--<td style="vertical-align:middle"/>商品名称</td>-->
                        <!--<td><input type="text" id="goodsName" name="goodsName" class="form-control" placeholder="商品名称" required autofocus/></td>-->
                        <!--</tr>-->
                        <!--<tr>-->
                        <!--<td style="vertical-align:middle">快  递</td>-->
                        <!--<td><input type="text" id="express" name="express" class="form-control" placeholder="原价 ￥" required autofocus/></td>-->
                        <!--</tr>-->
                        <!--<tr>-->
                        <!--<td style="vertical-align:middle">最少参团人数</td>-->
                        <!--<td><input type="number" id="min_participants" name="min_participants" class="form-control" placeholder="最少参团人数" required autofocus/></td>-->
                        <!--</tr>-->
                        <!--<tr>-->
                        <!--<td style="vertical-align:middle">最大参团人数</td>-->
                        <!--<td><input type="number" id="max_participants" name="max_participants" class="form-control" placeholder="最大参团人数" required autofocus/></td>-->
                        <!--</tr>-->
                        <!--<tr>-->
                        <!--<td style="vertical-align:middle">开始时间</td>-->
                        <!--<td><input type="date" id="start_time" name="start_time" class="form-control" placeholder="开始时间" required autofocus/></td>-->
                        <!--</tr>-->
                        <!--<tr>-->
                        <!--<td style="vertical-align:middle">截止时间</td>-->
                        <!--<td><input type="date" id="end_time" name="end_time" class="form-control" placeholder="截止时间" required autofocus/></td>-->
                        <!--</tr>-->
                        <!--<tr>-->
                        <!--<td style="vertical-align:middle">团购描述</td>-->
                        <!--<td><input type="text" id="description" name="description" class="form-control" placeholder="团购描述" required autofocus/></td>-->
                        <!--</tr>-->
                        <!--<tr>-->
                        <!--<td style="vertical-align:middle">是否有效</td>-->
                        <!--<td>-->
                        <!--<select id="dStatus" name="dStatus"  class="show-tick form-control1 selector" style="text-align:center;height:30px">-->
                        <!--<option value="1">有效</option>-->
                        <!--<option value="0">失效</option>-->
                        <!--</select>-->
                        <!--</td>-->
                        <!--</tr>-->
                        <!--</tbody>-->
                        <!--</table>-->

                        <!--<div class="modal-footer">-->
                        <!--<button type="submit" class="btn btn-primary">提交</button>-->
                        <!--</div>-->
                        <!--</form>-->
                        <!--</div>-->
                        <!--</div>&lt;!&ndash; /.modal-content &ndash;&gt;-->
                        <!--</div>&lt;!&ndash; /.modal &ndash;&gt;-->
                        <!--</div>-->
                        <!-- /.编辑团购信息模态框 -->

                        <!-- 添加团购活动信息模态框 -->
                        <div class="modal fade" id="addGroup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                             aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                            &times;
                                        </button>
                                        <h4 class="modal-title" id="myModalLabel">添加团购活动</h4>
                                    </div>
                                    <div class="modal-body">

                                        <i-form label-position="left" :label-width="75">
                                            <form-item label="选择商品">
                                                <select v-model="newGroup.goods.id"
                                                        style="text-align:center;width: 95%">
                                                    <option v-for="item in GoodsList" :key="item.id" :value="item.id"
                                                            v-text="item.name"></option>
                                                </select>
                                            </form-item>
                                            <form-item label="快递">
                                                <select v-model="newGroup.expressDelivery.id"
                                                        style="text-align:center;width: 150px">
                                                    <option v-for="express in expressDelivery" :key="express.id"
                                                            :value="express.id">
                                                        {{express.name}}&nbsp;{{express.price}}元
                                                    </option>
                                                </select>
                                            </form-item>
                                            <form-item label="最低参与人数">
                                                <i-input type="number" v-model="newGroup.minParticipants"></i-input>
                                            </form-item>
                                            <form-item label="最大参与人数">
                                                <i-input type="number" v-model="newGroup.maxParticipants"></i-input>
                                            </form-item>
                                            <form-item label="开始时间">
                                                <input type="date"
                                                       v-model="newGroup.startTime"/>
                                            </form-item>
                                            <form-item label="结束时间">
                                                <input type="date"
                                                       v-model="newGroup.endTime"/>
                                            </form-item>
                                            <form-item label="团购描述">
                                                <i-input type="textarea" :autosize="{minRows: 2,maxRows: 5}"
                                                         v-model="newGroup.description"></i-input>
                                            </form-item>
                                            <div class="modal-footer">
                                                <i-button class="btn btn-primary" id="btnAddDishes"
                                                          @click="createGroup">提交
                                                </i-button>
                                            </div>
                                        </i-form>
                                    </div>
                                </div><!-- /.modal-content -->
                            </div><!-- /.modal -->
                        </div>
                        <!-- /. 添加团购信息模态框 -->


                        <table class="table">
                            <thead>
                            <tr>
                                <th>操作</th>
                                <th>商品名</th>
                                <th>开团时间</th>
                                <th>截止时间</th>
                                <th>参团人数</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr v-for="group in groupsList">
                                <td><input type="radio" v-model="groupSelected"></td>
                                <td>{{group.goods.name}}</td>
                                <td>{{group.startDate}}</td>
                                <td>{{group.endDate}}</td>
                                <td>{{group.numberPart}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>


                    <!-- /#page-wrapper -->
                </div>
            </div>
        </div>

        <div class="panel panel-footer row">
            <div class="col-md-12" style="text-align: center">
                <div class="col-md-1 col-md-offset-4 text-center">
                    <ul class="list-unstyled">
                        <li><label>关于惠Go网</label>
                        <li>
                            <button class="btn btn-link" type="button">帮助中心</button>
                        <li>
                            <button class="btn btn-link" type="button">诚聘英才</button>
                        <li>
                            <button class="btn btn-link" type="button">法律声明</button>
                    </ul>
                </div>
                <div class="col-md-1 text-center">
                    <ul class="list-unstyled">
                        <li><label>买家中心</label>
                        <li>
                            <button class="btn btn-link" type="button">在线答疑</button>
                        <li>
                            <button class="btn btn-link" type="button">服务保障</button>
                    </ul>
                </div>
                <div class="col-md-1 text-center">
                    <ul class="list-unstyled">
                        <li><label>卖家中心</label>
                        <li>
                            <button class="btn btn-link" type="button">在线咨询</button>
                        <li>
                            <button class="btn btn-link" type="button">商品报名</button>
                        <li>
                            <button class="btn btn-link" type="button">商家规则</button>
                        <li>
                            <button class="btn btn-link" type="button">规则通知</button>
                    </ul>
                </div>
                <div class="col-md-1 text-center">
                    <ul class="list-unstyled">
                        <li><label>有话要说</label>
                        <li>
                            <button class="btn btn-link" type="button">客服热线</button>
                        <li>
                            <button class="btn btn-link" type="button">廉政举报</button>
                        <li>
                            <button class="btn btn-link" type="button">我要投诉</button>
                    </ul>
                </div>
                <div class="col-md-1 text-center">
                    <ul class="list-unstyled">
                        <li><label>服务保障</label>
                        <li>
                            <button class="btn btn-link" type="button">七天无理由退换货</button>
                        <li>
                            <button class="btn btn-link" type="button">维修/保养</button>
                        <li>
                            <button class="btn btn-link" type="button">购买延保服务</button>
                        <li>
                            <button class="btn btn-link" type="button">退换货政策</button>
                    </ul>
                </div>
            </div>
            <p>&nbsp;
            <p>&nbsp;
                <div class="col-md-12">
                    <div class="row text-center">
                        <a>关于网站</a>&nbsp;
                        <a>帮助中心</a>&nbsp;
                        <a>开放平台</a>&nbsp;
                        <a>招聘信息</a>&nbsp;
                        <a>联系我们</a>&nbsp;
                        <a>网站合作</a>&nbsp;
                        <a>法律声明及隐私权政策</a>&nbsp;
                        <a>知识产权</a>&nbsp;
                        <a>廉政举报</a>&nbsp;
                    </div>
            <p>&nbsp;
            <div class="row text-center">
                <label>增值电信业务经营许可证：xxx-xxxx</label>
                <label>网络文化经营许可证：xxx-xxxx</label>
            </div>
        </div>
    </div>
</div><!--appId-->
<!-- /#wrapper -->
<!-- Nav CSS -->
<link href="/css/bootstrap/custom.css" rel="stylesheet">
<script type="text/javascript" src="/js/vue/vue.js"></script>
<script type="text/javascript" src="/js/iview/iview.js"></script>
<script type="text/javascript" src="/js/axios/axios.min.js"></script>
<script type="text/javascript" src="/js/project/webRouter.js"></script>
<!-- Metis Menu Plugin JavaScript -->
<script src="/js/metisMenu.min.js"></script>
<script src="/js/custom.js"></script>
<script type="text/javascript">
    var app = new Vue({
        el: '#app',
        data: {
            url: routerUrl,
            user: '',
            groupsList: [],
            GoodsList: [],
            expressDelivery: [],
            newGroup: {
                expressDelivery: {
                    id: ''
                },
                /*参团商品*/
                goods: {
                    id: ''
                },
                minParticipants: '',
                maxParticipants: '',
                startTime: '',
                endTime: '',
                iseffective: '',
                description: '',
            },
            page: 1,
            pageSize: 40,
            /*总记录条数*/
            totalRecord: 0,
            groupSelected: ''
        },
        methods: {
            createGroup: function () {
                var appThis = this;
                Ajx.post('/group/addGroupPurchas', this.newGroup).then(function (response) {
                    getGroupsList(appThis);
                    alert('团购创建成功')
                }).catch(function (error) {
                    alert('团购创建失败\n' + error.response.data.message);
                })
            },
            showAddGroup: function () {
                /*  $('#addGroup').modal('show');*/
            }
        },
        created: function () {
            getLoginUser(this);
        }
    })

    /*获取登录的用户信息*/
    function getLoginUser(appThis) {
        /*先获取Session的用户信息,不存在表示用户未登录*/
        return Ajx.get(routerUrl.get.userInfo).then(function (response) {
            if (response.data != undefined) {
                appThis.user = response.data;
                appThis.isLogin = true;
                getGroupsList(appThis);
            }
        }).catch(function (error) {
            appThis.isLogin = false;
        });
    };

    /*获取团购列表*/
    function getGroupsList(appThis) {
        Ajx.get('/group/getBusinessGroup', {
            params: {
                page: appThis.page,
                pageSize: appThis.pageSize
            }
        }).then(function (response) {
            appThis.groupsList = [];
            getGoodsList(appThis);
            response.data.forEach(function (group) {
                appThis.groupsList.push(group);
            })
        })
    }

    function getGoodsList(appThis) {
        Ajx.get('/goods/getGoodsList').then(function (response) {
            appThis.GoodsList = [];
            getExpressDelivery(appThis);
            response.data.forEach(function (goods) {
                appThis.GoodsList.push(goods);
            });
        })
    }

    function getExpressDelivery(appThis) {
        Ajx.get('/group/getAllExpress').then(function (response) {
            appThis.expressDelivery = [];
            response.data.forEach(function (express) {
                appThis.expressDelivery.push(express);
            })
        })
    }

    /*$('#btnUpGroupInfo').click(function () {
        var checked = $("input[type='radio']:checked").val();
        if (checked == undefined) {
            alert('请选择一项团购');
        } else {
            $('#upGroupInfo').modal('show');

        }
    });*/
    /*
        $('#btnDelGroupInfo').click(function () {
            var checked = $("input[type='radio']:checked");
            if (checked.val() == undefined) {
                alert('请选择一项团购');
            } else {
                window.location = "/group/delGroupPurchase" + checked.val();
            }
        })*/
</script>

</body>
</html>
